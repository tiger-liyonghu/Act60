name: Trigger Vercel Deployment

on:
  push:
    branches: [ main ]
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  trigger-vercel:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Build project
      run: npm run build
      
    - name: Notify Vercel Deployment
      run: |
        echo "âœ… æœ¬åœ°æ„å»ºæˆåŠŸ"
        echo "ğŸ“¦ é¡¹ç›®å·²æ„å»ºï¼Œç­‰å¾…Vercelè‡ªåŠ¨éƒ¨ç½²..."
        echo "ğŸ”— ç”Ÿäº§ç¯å¢ƒ: https://graph.actuaryhelp.com/"
        echo "ğŸ• æ—¶é—´: $(date)"
        
    - name: Check deployment status
      run: |
        echo "æ£€æŸ¥éƒ¨ç½²çŠ¶æ€..."
        sleep 30
        curl -s -I https://graph.actuaryhelp.com/ | grep -i "age\|vercel-cache" || echo "æ— æ³•è®¿é—®ç½‘ç«™"